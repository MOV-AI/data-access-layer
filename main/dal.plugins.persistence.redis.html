

<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>dal.plugins.persistence.redis package &mdash; data-access-layer  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/graphviz.css?v=eafc0fe6" />

  
    <link rel="shortcut icon" href="_static/cropped-Mov.ai-favicon2-32x32.png"/>
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js?v=b3ba4146"></script>
      <script src="_static/doctools.js?v=888ff710"></script>
      <script src="_static/sphinx_highlight.js?v=4825356b"></script>
      <script src="_static/versions.js?v=6808f9ef"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="dal.plugins.resources package" href="dal.plugins.resources.html" />
    <link rel="prev" title="dal.plugins.persistence.git package" href="dal.plugins.persistence.git.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            data-access-layer
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="readme.html">data-access-layer</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">data-access-layer</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="dal.html">dal package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="dal.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="dal.api.html">dal.api package</a></li>
<li class="toctree-l4"><a class="reference internal" href="dal.archive.html">dal.archive package</a></li>
<li class="toctree-l4"><a class="reference internal" href="dal.backup.html">dal.backup package</a></li>
<li class="toctree-l4"><a class="reference internal" href="dal.classes.html">dal.classes package</a></li>
<li class="toctree-l4"><a class="reference internal" href="dal.data.html">dal.data package</a></li>
<li class="toctree-l4"><a class="reference internal" href="dal.db_handlers.html">dal.db_handlers package</a></li>
<li class="toctree-l4"><a class="reference internal" href="dal.exceptions.html">dal.exceptions package</a></li>
<li class="toctree-l4"><a class="reference internal" href="dal.helpers.html">dal.helpers package</a></li>
<li class="toctree-l4"><a class="reference internal" href="dal.models.html">dal.models package</a></li>
<li class="toctree-l4"><a class="reference internal" href="dal.movaidb.html">dal.movaidb package</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="dal.plugins.html">dal.plugins package</a></li>
<li class="toctree-l4"><a class="reference internal" href="dal.scopes.html">dal.scopes package</a></li>
<li class="toctree-l4"><a class="reference internal" href="dal.tools.html">dal.tools package</a></li>
<li class="toctree-l4"><a class="reference internal" href="dal.utils.html">dal.utils package</a></li>
<li class="toctree-l4"><a class="reference internal" href="dal.validation.html">dal.validation package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="dal.html#module-dal">Module contents</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="permissions.html">Resource permissions</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">data-access-layer</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="modules.html">data-access-layer</a></li>
          <li class="breadcrumb-item"><a href="dal.html">dal package</a></li>
          <li class="breadcrumb-item"><a href="dal.plugins.html">dal.plugins package</a></li>
          <li class="breadcrumb-item"><a href="dal.plugins.persistence.html">dal.plugins.persistence package</a></li>
      <li class="breadcrumb-item active">dal.plugins.persistence.redis package</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/MOV-AI/flows-test-core/blob/main/docs/source/dal.plugins.persistence.redis.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="dal-plugins-persistence-redis-package">
<h1>dal.plugins.persistence.redis package<a class="headerlink" href="#dal-plugins-persistence-redis-package" title="Permalink to this heading"></a></h1>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this heading"></a></h2>
</section>
<section id="module-dal.plugins.persistence.redis.redis">
<span id="dal-plugins-persistence-redis-redis-module"></span><h2>dal.plugins.persistence.redis.redis module<a class="headerlink" href="#module-dal.plugins.persistence.redis.redis" title="Permalink to this heading"></a></h2>
<p>Copyright (C) Mov.ai  - All Rights Reserved
Unauthorized copying of this file, via any medium is strictly prohibited
Proprietary and confidential</p>
<p>Developers:
- Alexandre Pires  (<a class="reference external" href="mailto:alexandre&#46;pires&#37;&#52;&#48;mov&#46;ai">alexandre<span>&#46;</span>pires<span>&#64;</span>mov<span>&#46;</span>ai</a>) - 2020</p>
<dl class="py class">
<dt class="sig sig-object py" id="dal.plugins.persistence.redis.redis.RedisPlugin">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">dal.plugins.persistence.redis.redis.</span></span><span class="sig-name descname"><span class="pre">RedisPlugin</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dal.plugins.persistence.redis.redis.RedisPlugin" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="dal.plugins.classes.html#dal.plugins.classes.persistence.PersistencePlugin" title="dal.plugins.classes.persistence.PersistencePlugin"><code class="xref py py-class docutils literal notranslate"><span class="pre">PersistencePlugin</span></code></a></p>
<p>This class implements the actual plugin that store on redis,
maitaining compatibility with the V1, this means that when
saving to the redis the key used for each attrinute will be
composed of the following constrains:</p>
<ul class="simple">
<li><p>When an attribute had the “value_on_key” flag it will be stored in the</p></li>
</ul>
<p>the key composition, otherwise it will be stored as a value
- Composition pattern: &lt;scope&gt;:&lt;id&gt;[(,&lt;attr&gt;:&lt;id&gt;)*](,&lt;attr&gt;)+:(&lt;value&gt;)*</p>
<dl class="py method">
<dt class="sig sig-object py" id="dal.plugins.persistence.redis.redis.RedisPlugin.backup">
<span class="sig-name descname"><span class="pre">backup</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dal.plugins.persistence.redis.redis.RedisPlugin.backup" title="Permalink to this definition"></a></dt>
<dd><p>archive a scope/scopes into a zip file</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dal.plugins.persistence.redis.redis.RedisPlugin.create_workspace">
<span class="sig-name descname"><span class="pre">create_workspace</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ref</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dal.plugins.persistence.redis.redis.RedisPlugin.create_workspace" title="Permalink to this definition"></a></dt>
<dd><p>creates a new workspace, on the REDIS driver this is not supported
by design</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dal.plugins.persistence.redis.redis.RedisPlugin.decode_hash">
<span class="sig-name descname"><span class="pre">decode_hash</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_hash</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dal.plugins.persistence.redis.redis.RedisPlugin.decode_hash" title="Permalink to this definition"></a></dt>
<dd><p>Decodes a full hash from redis</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dal.plugins.persistence.redis.redis.RedisPlugin.decode_list">
<span class="sig-name descname"><span class="pre">decode_list</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_list</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dal.plugins.persistence.redis.redis.RedisPlugin.decode_list" title="Permalink to this definition"></a></dt>
<dd><p>Decodes a full list from redis</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dal.plugins.persistence.redis.redis.RedisPlugin.decode_value">
<span class="sig-name descname"><span class="pre">decode_value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dal.plugins.persistence.redis.redis.RedisPlugin.decode_value" title="Permalink to this definition"></a></dt>
<dd><p>Decodes a value from redis</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dal.plugins.persistence.redis.redis.RedisPlugin.delete">
<span class="sig-name descname"><span class="pre">delete</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dal.plugins.persistence.redis.redis.RedisPlugin.delete" title="Permalink to this definition"></a></dt>
<dd><p>delete an object from the persistent layer,
you may provide a ScopeInstanceVersionNode or use the following args;
- scope
- ref
- data
And optional:
- schema_version</p>
<p>If the schema_version is not specified we will try to load it
from redis, if it is missing the default will be 1.0</p>
<p>If data is not a dict this will erase all keys defined in schema,
otherwise it will only delete the passed structure</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dal.plugins.persistence.redis.redis.RedisPlugin.delete_all_keys">
<span class="sig-name descname"><span class="pre">delete_all_keys</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="dal.data.html#dal.data.tree.TreeNode" title="dal.data.tree.TreeNode"><span class="pre">TreeNode</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">base</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keys</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">conn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Redis</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dal.plugins.persistence.redis.redis.RedisPlugin.delete_all_keys" title="Permalink to this definition"></a></dt>
<dd><p>Delete the object from redis, according the V1 specifications</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dal.plugins.persistence.redis.redis.RedisPlugin.delete_keys">
<span class="sig-name descname"><span class="pre">delete_keys</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="dal.data.html#dal.data.tree.TreeNode" title="dal.data.tree.TreeNode"><span class="pre">TreeNode</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">base</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keys</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">conn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Redis</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dal.plugins.persistence.redis.redis.RedisPlugin.delete_keys" title="Permalink to this definition"></a></dt>
<dd><p>Delete some keys from the redis, according the V1 specifications</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dal.plugins.persistence.redis.redis.RedisPlugin.delete_workspace">
<span class="sig-name descname"><span class="pre">delete_workspace</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ref</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dal.plugins.persistence.redis.redis.RedisPlugin.delete_workspace" title="Permalink to this definition"></a></dt>
<dd><p>deletes a existing workspace</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dal.plugins.persistence.redis.redis.RedisPlugin.fetch_keys">
<span class="sig-name descname"><span class="pre">fetch_keys</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">conn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scope</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span></span></span><a class="headerlink" href="#dal.plugins.persistence.redis.redis.RedisPlugin.fetch_keys" title="Permalink to this definition"></a></dt>
<dd><p>Get keys using KEYS command</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dal.plugins.persistence.redis.redis.RedisPlugin.fetch_keys_iter">
<span class="sig-name descname"><span class="pre">fetch_keys_iter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">conn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scope</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span></span></span><a class="headerlink" href="#dal.plugins.persistence.redis.redis.RedisPlugin.fetch_keys_iter" title="Permalink to this definition"></a></dt>
<dd><p>Get keys using SCAN ITER command</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dal.plugins.persistence.redis.redis.RedisPlugin.get_related_objects">
<span class="sig-name descname"><span class="pre">get_related_objects</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dal.plugins.persistence.redis.redis.RedisPlugin.get_related_objects" title="Permalink to this definition"></a></dt>
<dd><p>Get a list of all related objects</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dal.plugins.persistence.redis.redis.RedisPlugin.get_scope_info">
<span class="sig-name descname"><span class="pre">get_scope_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dal.plugins.persistence.redis.redis.RedisPlugin.get_scope_info" title="Permalink to this definition"></a></dt>
<dd><p>get the information of a scope</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dal.plugins.persistence.redis.redis.RedisPlugin.key_to_dict">
<span class="sig-name descname"><span class="pre">key_to_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="dal.data.html#dal.data.tree.TreeNode" title="dal.data.tree.TreeNode"><span class="pre">TreeNode</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">conn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dal.plugins.persistence.redis.redis.RedisPlugin.key_to_dict" title="Permalink to this definition"></a></dt>
<dd><p>convert a key in the V1 specfication to a dictonary, also
loads the value from the Redis database</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dal.plugins.persistence.redis.redis.RedisPlugin.list_scopes">
<span class="sig-name descname"><span class="pre">list_scopes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dal.plugins.persistence.redis.redis.RedisPlugin.list_scopes" title="Permalink to this definition"></a></dt>
<dd><p>list all existing scopes
This might need to be changed in the future, for now it
search all keys in redis, we might need in the future
to use a “caching” mechanism, probably a set that is updated
everytime a a scope is added/delete</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dal.plugins.persistence.redis.redis.RedisPlugin.list_versions">
<span class="sig-name descname"><span class="pre">list_versions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dal.plugins.persistence.redis.redis.RedisPlugin.list_versions" title="Permalink to this definition"></a></dt>
<dd><p>list all existing scopes</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dal.plugins.persistence.redis.redis.RedisPlugin.list_workspaces">
<span class="sig-name descname"><span class="pre">list_workspaces</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dal.plugins.persistence.redis.redis.RedisPlugin.list_workspaces" title="Permalink to this definition"></a></dt>
<dd><p>list available workspaces, on the REDIS driver this is not supported
by design</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dal.plugins.persistence.redis.redis.RedisPlugin.load_keys">
<span class="sig-name descname"><span class="pre">load_keys</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="dal.data.html#dal.data.tree.TreeNode" title="dal.data.tree.TreeNode"><span class="pre">TreeNode</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">base</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keys</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">conn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Redis</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dal.plugins.persistence.redis.redis.RedisPlugin.load_keys" title="Permalink to this definition"></a></dt>
<dd><p>Save the object in the redis, according the V1 specifications</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="dal.plugins.persistence.redis.redis.RedisPlugin.plugin_name">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">plugin_name</span></span><a class="headerlink" href="#dal.plugins.persistence.redis.redis.RedisPlugin.plugin_name" title="Permalink to this definition"></a></dt>
<dd><p>Get current plugin class</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="dal.plugins.persistence.redis.redis.RedisPlugin.plugin_version">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">plugin_version</span></span><a class="headerlink" href="#dal.plugins.persistence.redis.redis.RedisPlugin.plugin_version" title="Permalink to this definition"></a></dt>
<dd><p>Get current plugin class</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dal.plugins.persistence.redis.redis.RedisPlugin.read">
<span class="sig-name descname"><span class="pre">read</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dal.plugins.persistence.redis.redis.RedisPlugin.read" title="Permalink to this definition"></a></dt>
<dd><p>load an object from the persistent layer, you must provide the
following args
- scope
- ref
The following argument is optional:
- schema_version</p>
<p>If the schema_version is not specified we will try to load it
from redis, if it is missing the default will be 1.0</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dal.plugins.persistence.redis.redis.RedisPlugin.rebuild_indexes">
<span class="sig-name descname"><span class="pre">rebuild_indexes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dal.plugins.persistence.redis.redis.RedisPlugin.rebuild_indexes" title="Permalink to this definition"></a></dt>
<dd><p>force the database layer to rebuild
all indexes, this is a costly operation</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dal.plugins.persistence.redis.redis.RedisPlugin.restore">
<span class="sig-name descname"><span class="pre">restore</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dal.plugins.persistence.redis.redis.RedisPlugin.restore" title="Permalink to this definition"></a></dt>
<dd><p>restore a scope/scopes from a zip file</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dal.plugins.persistence.redis.redis.RedisPlugin.save_keys">
<span class="sig-name descname"><span class="pre">save_keys</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="dal.data.html#dal.data.tree.TreeNode" title="dal.data.tree.TreeNode"><span class="pre">TreeNode</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">base</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keys</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">conn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Redis</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dal.plugins.persistence.redis.redis.RedisPlugin.save_keys" title="Permalink to this definition"></a></dt>
<dd><p>Save the object in the redis, according the V1 specifications</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dal.plugins.persistence.redis.redis.RedisPlugin.schema_to_key">
<span class="sig-name descname"><span class="pre">schema_to_key</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="dal.data.html#dal.data.tree.TreeNode" title="dal.data.tree.TreeNode"><span class="pre">TreeNode</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dal.plugins.persistence.redis.redis.RedisPlugin.schema_to_key" title="Permalink to this definition"></a></dt>
<dd><p>Convert a schema to a redis key according to the standard</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="dal.plugins.persistence.redis.redis.RedisPlugin.versioning">
<em class="property"><span class="pre">abstract</span><span class="w"> </span><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">versioning</span></span><a class="headerlink" href="#dal.plugins.persistence.redis.redis.RedisPlugin.versioning" title="Permalink to this definition"></a></dt>
<dd><p>returns if this plugin supports versioning</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dal.plugins.persistence.redis.redis.RedisPlugin.workspace_info">
<span class="sig-name descname"><span class="pre">workspace_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ref</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dal.plugins.persistence.redis.redis.RedisPlugin.workspace_info" title="Permalink to this definition"></a></dt>
<dd><p>get information about a workspace</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dal.plugins.persistence.redis.redis.RedisPlugin.write">
<span class="sig-name descname"><span class="pre">write</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dal.plugins.persistence.redis.redis.RedisPlugin.write" title="Permalink to this definition"></a></dt>
<dd><p>Stores the object on the persistent layer, for now we only support
ScopeInstanceVersionNode, and python dict.</p>
<dl class="simple">
<dt>if you pass a dict you must provide the following args:</dt><dd><ul class="simple">
<li><p>scope</p></li>
<li><p>ref</p></li>
<li><p>schema_version</p></li>
</ul>
</dd>
</dl>
<p>Currently a dict must be in one of the following form:
- { &lt;scope&gt; : { {ref} : { &lt;data&gt; } } }
- { &lt;data&gt; }</p>
<p>The data part must comply with the schema of the scope</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-dal.plugins.persistence.redis">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-dal.plugins.persistence.redis" title="Permalink to this heading"></a></h2>
<p>Copyright (C) Mov.ai  - All Rights Reserved
Unauthorized copying of this file, via any medium is strictly prohibited
Proprietary and confidential</p>
<p>Developers:
- Alexandre Pires  (<a class="reference external" href="mailto:alexandre&#46;pires&#37;&#52;&#48;mov&#46;ai">alexandre<span>&#46;</span>pires<span>&#64;</span>mov<span>&#46;</span>ai</a>) - 2020</p>
<dl class="py class">
<dt class="sig sig-object py" id="dal.plugins.persistence.redis.RedisPlugin">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">dal.plugins.persistence.redis.</span></span><span class="sig-name descname"><span class="pre">RedisPlugin</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dal.plugins.persistence.redis.RedisPlugin" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="dal.plugins.classes.html#dal.plugins.classes.persistence.PersistencePlugin" title="dal.plugins.classes.persistence.PersistencePlugin"><code class="xref py py-class docutils literal notranslate"><span class="pre">PersistencePlugin</span></code></a></p>
<p>This class implements the actual plugin that store on redis,
maitaining compatibility with the V1, this means that when
saving to the redis the key used for each attrinute will be
composed of the following constrains:</p>
<ul class="simple">
<li><p>When an attribute had the “value_on_key” flag it will be stored in the</p></li>
</ul>
<p>the key composition, otherwise it will be stored as a value
- Composition pattern: &lt;scope&gt;:&lt;id&gt;[(,&lt;attr&gt;:&lt;id&gt;)*](,&lt;attr&gt;)+:(&lt;value&gt;)*</p>
<dl class="py method">
<dt class="sig sig-object py" id="dal.plugins.persistence.redis.RedisPlugin.backup">
<span class="sig-name descname"><span class="pre">backup</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dal.plugins.persistence.redis.RedisPlugin.backup" title="Permalink to this definition"></a></dt>
<dd><p>archive a scope/scopes into a zip file</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dal.plugins.persistence.redis.RedisPlugin.create_workspace">
<span class="sig-name descname"><span class="pre">create_workspace</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ref</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dal.plugins.persistence.redis.RedisPlugin.create_workspace" title="Permalink to this definition"></a></dt>
<dd><p>creates a new workspace, on the REDIS driver this is not supported
by design</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dal.plugins.persistence.redis.RedisPlugin.decode_hash">
<span class="sig-name descname"><span class="pre">decode_hash</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_hash</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dal.plugins.persistence.redis.RedisPlugin.decode_hash" title="Permalink to this definition"></a></dt>
<dd><p>Decodes a full hash from redis</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dal.plugins.persistence.redis.RedisPlugin.decode_list">
<span class="sig-name descname"><span class="pre">decode_list</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_list</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dal.plugins.persistence.redis.RedisPlugin.decode_list" title="Permalink to this definition"></a></dt>
<dd><p>Decodes a full list from redis</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dal.plugins.persistence.redis.RedisPlugin.decode_value">
<span class="sig-name descname"><span class="pre">decode_value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dal.plugins.persistence.redis.RedisPlugin.decode_value" title="Permalink to this definition"></a></dt>
<dd><p>Decodes a value from redis</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dal.plugins.persistence.redis.RedisPlugin.delete">
<span class="sig-name descname"><span class="pre">delete</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dal.plugins.persistence.redis.RedisPlugin.delete" title="Permalink to this definition"></a></dt>
<dd><p>delete an object from the persistent layer,
you may provide a ScopeInstanceVersionNode or use the following args;
- scope
- ref
- data
And optional:
- schema_version</p>
<p>If the schema_version is not specified we will try to load it
from redis, if it is missing the default will be 1.0</p>
<p>If data is not a dict this will erase all keys defined in schema,
otherwise it will only delete the passed structure</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dal.plugins.persistence.redis.RedisPlugin.delete_all_keys">
<span class="sig-name descname"><span class="pre">delete_all_keys</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="dal.data.html#dal.data.tree.TreeNode" title="dal.data.tree.TreeNode"><span class="pre">TreeNode</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">base</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keys</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">conn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Redis</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dal.plugins.persistence.redis.RedisPlugin.delete_all_keys" title="Permalink to this definition"></a></dt>
<dd><p>Delete the object from redis, according the V1 specifications</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dal.plugins.persistence.redis.RedisPlugin.delete_keys">
<span class="sig-name descname"><span class="pre">delete_keys</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="dal.data.html#dal.data.tree.TreeNode" title="dal.data.tree.TreeNode"><span class="pre">TreeNode</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">base</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keys</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">conn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Redis</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dal.plugins.persistence.redis.RedisPlugin.delete_keys" title="Permalink to this definition"></a></dt>
<dd><p>Delete some keys from the redis, according the V1 specifications</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dal.plugins.persistence.redis.RedisPlugin.delete_workspace">
<span class="sig-name descname"><span class="pre">delete_workspace</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ref</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dal.plugins.persistence.redis.RedisPlugin.delete_workspace" title="Permalink to this definition"></a></dt>
<dd><p>deletes a existing workspace</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dal.plugins.persistence.redis.RedisPlugin.fetch_keys">
<span class="sig-name descname"><span class="pre">fetch_keys</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">conn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scope</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span></span></span><a class="headerlink" href="#dal.plugins.persistence.redis.RedisPlugin.fetch_keys" title="Permalink to this definition"></a></dt>
<dd><p>Get keys using KEYS command</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dal.plugins.persistence.redis.RedisPlugin.fetch_keys_iter">
<span class="sig-name descname"><span class="pre">fetch_keys_iter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">conn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scope</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span></span></span><a class="headerlink" href="#dal.plugins.persistence.redis.RedisPlugin.fetch_keys_iter" title="Permalink to this definition"></a></dt>
<dd><p>Get keys using SCAN ITER command</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dal.plugins.persistence.redis.RedisPlugin.get_related_objects">
<span class="sig-name descname"><span class="pre">get_related_objects</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dal.plugins.persistence.redis.RedisPlugin.get_related_objects" title="Permalink to this definition"></a></dt>
<dd><p>Get a list of all related objects</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dal.plugins.persistence.redis.RedisPlugin.get_scope_info">
<span class="sig-name descname"><span class="pre">get_scope_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dal.plugins.persistence.redis.RedisPlugin.get_scope_info" title="Permalink to this definition"></a></dt>
<dd><p>get the information of a scope</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dal.plugins.persistence.redis.RedisPlugin.key_to_dict">
<span class="sig-name descname"><span class="pre">key_to_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="dal.data.html#dal.data.tree.TreeNode" title="dal.data.tree.TreeNode"><span class="pre">TreeNode</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">conn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dal.plugins.persistence.redis.RedisPlugin.key_to_dict" title="Permalink to this definition"></a></dt>
<dd><p>convert a key in the V1 specfication to a dictonary, also
loads the value from the Redis database</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dal.plugins.persistence.redis.RedisPlugin.list_scopes">
<span class="sig-name descname"><span class="pre">list_scopes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dal.plugins.persistence.redis.RedisPlugin.list_scopes" title="Permalink to this definition"></a></dt>
<dd><p>list all existing scopes
This might need to be changed in the future, for now it
search all keys in redis, we might need in the future
to use a “caching” mechanism, probably a set that is updated
everytime a a scope is added/delete</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dal.plugins.persistence.redis.RedisPlugin.list_versions">
<span class="sig-name descname"><span class="pre">list_versions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dal.plugins.persistence.redis.RedisPlugin.list_versions" title="Permalink to this definition"></a></dt>
<dd><p>list all existing scopes</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dal.plugins.persistence.redis.RedisPlugin.list_workspaces">
<span class="sig-name descname"><span class="pre">list_workspaces</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dal.plugins.persistence.redis.RedisPlugin.list_workspaces" title="Permalink to this definition"></a></dt>
<dd><p>list available workspaces, on the REDIS driver this is not supported
by design</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dal.plugins.persistence.redis.RedisPlugin.load_keys">
<span class="sig-name descname"><span class="pre">load_keys</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="dal.data.html#dal.data.tree.TreeNode" title="dal.data.tree.TreeNode"><span class="pre">TreeNode</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">base</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keys</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">conn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Redis</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dal.plugins.persistence.redis.RedisPlugin.load_keys" title="Permalink to this definition"></a></dt>
<dd><p>Save the object in the redis, according the V1 specifications</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="dal.plugins.persistence.redis.RedisPlugin.plugin_name">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">plugin_name</span></span><a class="headerlink" href="#dal.plugins.persistence.redis.RedisPlugin.plugin_name" title="Permalink to this definition"></a></dt>
<dd><p>Get current plugin class</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="dal.plugins.persistence.redis.RedisPlugin.plugin_version">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">plugin_version</span></span><a class="headerlink" href="#dal.plugins.persistence.redis.RedisPlugin.plugin_version" title="Permalink to this definition"></a></dt>
<dd><p>Get current plugin class</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dal.plugins.persistence.redis.RedisPlugin.read">
<span class="sig-name descname"><span class="pre">read</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dal.plugins.persistence.redis.RedisPlugin.read" title="Permalink to this definition"></a></dt>
<dd><p>load an object from the persistent layer, you must provide the
following args
- scope
- ref
The following argument is optional:
- schema_version</p>
<p>If the schema_version is not specified we will try to load it
from redis, if it is missing the default will be 1.0</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dal.plugins.persistence.redis.RedisPlugin.rebuild_indexes">
<span class="sig-name descname"><span class="pre">rebuild_indexes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dal.plugins.persistence.redis.RedisPlugin.rebuild_indexes" title="Permalink to this definition"></a></dt>
<dd><p>force the database layer to rebuild
all indexes, this is a costly operation</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dal.plugins.persistence.redis.RedisPlugin.restore">
<span class="sig-name descname"><span class="pre">restore</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dal.plugins.persistence.redis.RedisPlugin.restore" title="Permalink to this definition"></a></dt>
<dd><p>restore a scope/scopes from a zip file</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dal.plugins.persistence.redis.RedisPlugin.save_keys">
<span class="sig-name descname"><span class="pre">save_keys</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="dal.data.html#dal.data.tree.TreeNode" title="dal.data.tree.TreeNode"><span class="pre">TreeNode</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">base</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keys</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">conn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Redis</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dal.plugins.persistence.redis.RedisPlugin.save_keys" title="Permalink to this definition"></a></dt>
<dd><p>Save the object in the redis, according the V1 specifications</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dal.plugins.persistence.redis.RedisPlugin.schema_to_key">
<span class="sig-name descname"><span class="pre">schema_to_key</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="dal.data.html#dal.data.tree.TreeNode" title="dal.data.tree.TreeNode"><span class="pre">TreeNode</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dal.plugins.persistence.redis.RedisPlugin.schema_to_key" title="Permalink to this definition"></a></dt>
<dd><p>Convert a schema to a redis key according to the standard</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="dal.plugins.persistence.redis.RedisPlugin.versioning">
<em class="property"><span class="pre">abstract</span><span class="w"> </span><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">versioning</span></span><a class="headerlink" href="#dal.plugins.persistence.redis.RedisPlugin.versioning" title="Permalink to this definition"></a></dt>
<dd><p>returns if this plugin supports versioning</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dal.plugins.persistence.redis.RedisPlugin.workspace_info">
<span class="sig-name descname"><span class="pre">workspace_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ref</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dal.plugins.persistence.redis.RedisPlugin.workspace_info" title="Permalink to this definition"></a></dt>
<dd><p>get information about a workspace</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dal.plugins.persistence.redis.RedisPlugin.write">
<span class="sig-name descname"><span class="pre">write</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dal.plugins.persistence.redis.RedisPlugin.write" title="Permalink to this definition"></a></dt>
<dd><p>Stores the object on the persistent layer, for now we only support
ScopeInstanceVersionNode, and python dict.</p>
<dl class="simple">
<dt>if you pass a dict you must provide the following args:</dt><dd><ul class="simple">
<li><p>scope</p></li>
<li><p>ref</p></li>
<li><p>schema_version</p></li>
</ul>
</dd>
</dl>
<p>Currently a dict must be in one of the following form:
- { &lt;scope&gt; : { {ref} : { &lt;data&gt; } } }
- { &lt;data&gt; }</p>
<p>The data part must comply with the schema of the scope</p>
</dd></dl>

</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="dal.plugins.persistence.git.html" class="btn btn-neutral float-left" title="dal.plugins.persistence.git package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="dal.plugins.resources.html" class="btn btn-neutral float-right" title="dal.plugins.resources package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Backend.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
        <span class="fa fa-book"> Read the Docs</span>
        v: main
        <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
        <dt>Versions</dt>
        <dl id="docs-versions"></dl>
        <hr />
        <a href="https://tech.michaelaltfield.net/2020/07/18/sphinx-rtd-github-pages-1/">Continuous
            Documentation</a> hosting provided by <a href="https://pages.github.com/">GitHub Pages</a>.
    </div>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>